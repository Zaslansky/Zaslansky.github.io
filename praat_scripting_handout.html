<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title></title>
  <style>
    html {
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 12px;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      html {
        background-color: white;
      }
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
      font-size: 85%;
      margin: 0;
      hyphens: manual;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <style type="text/css">
  /*
   * I add this to html files generated with pandoc.
   * Originally from https://gist.github.com/killercup/5917178
   */

  html {
      overflow-y: scroll;
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
  }

  body {
      color: #444;
      font-family: "Source Sans 3", Helvetica-Neue, Helvetica, Sans;
      line-height: 1.5;
      padding: 0.5em;
      margin: auto;
      max-width: 55em;
      background: #fefefe;
  }

  a {
      color: #2171b5;
      text-decoration: underline;
  }

  tr:nth-child(even) {background: #F8F8F8}
  tr:nth-child(odd) {background: #FFF}

  a:visited {
      color: #2171b5;
      text-decoration: none;
  }

  a:focus {
      outline: thin dotted;
  }

  *::-moz-selection {
      background: rgba(255, 255, 0, 0.3);
      color: #000;
  }

  *::selection {
      background: rgba(255, 255, 0, 0.3);
      color: #000;
  }

  a::-moz-selection {
      background: rgba(255, 255, 0, 0.3);
      color: #0645ad;
  }

  a::selection {
      background: rgba(255, 255, 0, 0.3);
      color: #0645ad;
  }

  p {
      margin: 0.75em 0;
  }

  img {
      max-width: 60%;
      max-height:400px;
  }

  video {
      max-width: 60%;
  }


  h1, h2, h3, h4, h5, h6 {
      color: #111;
      line-height: 80%;
      margin-top: 1em;
      margin-bottom: 0.5em;
      font-weight: normal;
  }

  h1, h2, h3, h4, h5, h6 {
      font-weight: bold;
  }

  h1 {
      font-size: 2em;
      line-height: 1.25;
      color:  #084594;

  }

  h1.title {
      margin-top:0.2em;
      font-size: 2em;
      line-height: 1.25;
  }

  h2 {
      font-size: 1.5em;
      line-height: 1.6em;
          color:  #084594;
      padding-bottom: 3px;

  }

  h3 {
      font-size: 1.2em;
      line-height: 1.6em;
  }


  h4 {
      font-size: 1.2em;
      line-height: 1.4em;
  }

  h5 {
      font-size: 1em;
  }

  h6 {
      font-size: 0.9em;
  }

  blockquote {
      color: #666666;
      margin: 0;
      padding-left: 3em;
      border-left: 0.5em #EEE solid;
  }

  hr {
      display: block;
      height: 2px;
      border: 0;
      border-top: 1px solid #aaa;
      border-bottom: 1px solid #eee;
      margin: 0.5em 0;
      padding: 0;
  }

  pre, code, kbd, samp {
      color: #000;
      font-family: monospace, monospace;
      _font-family: 'courier new', monospace;
      font-size: 0.98em;
  }

  pre {
      white-space: pre;
      white-space: pre-wrap;
      word-wrap: break-word;
  }

  .answer {
      color:#CC0033;
      font-style:italic;
  }

  b, strong {
      font-weight: bold;
  }

  dfn {
      font-style: italic;
  }

  ins {
      background: #ff9;
      color: #000;
      text-decoration: none;
  }

  mark {
      background: #ff0;
      color: #000;
      font-style: italic;
      font-weight: bold;
  }

  sub, sup {
      font-size: 75%;
      line-height: 0;
      position: relative;
      vertical-align: baseline;
  }

  sup {
      top: -0.5em;
  }

  sub {
      bottom: -0.25em;
  }

  ul, ol {
      margin: 0.5em 0;
      padding: 0em 0em 0em 1em;
  }

  ul img {
      list-style-type: none;
  }

  li p:last-child {
      margin-bottom: 0;
  }

  hr {
      border-top:none;
      height:0px;
      clear:both;
  }

  ul ul, ol ol {
      margin: .3em 0;
  }

  dl {
      margin-bottom: 1em;
  }

  dt {
      font-weight: bold;
      margin-bottom: .8em;
  }

  dd {
      margin: 0 0 .8em 2em;
  }

  dd:last-child {
      margin-bottom: 0;
  }

  img {
      border: 0;
      -ms-interpolation-mode: bicubic;
      vertical-align: middle;
  }

  figure {
      display: block;
      text-align: center;
      margin: 1em 0;
  }

  figure img {
      border: none;
      margin: 0 auto;
  }

  figcaption {
      font-size: 0.8em;
      font-style: italic;
      margin: 0 0 .8em;
  }

  table {
      margin-bottom: 2em;
      border-bottom: 1px solid #ddd;
      border-right: 1px solid #ddd;
      border-spacing: 0;
      border-collapse: collapse;
  }

  table th {
      padding: .2em 1em;
      background-color: #eee;
      border-top: 1px solid #ddd;
      border-left: 1px solid #ddd;
  }

  table td {
      padding: .2em 1em;
      border-top: 1px solid #ddd;
      border-left: 1px solid #ddd;
      vertical-align: top;
  }

  .author {
      font-size: 1.2em;
      text-align: center;
  }

  @media only screen and (min-width: 480px) {
      body {
  	font-size: 14px;
      }
  }
  @media only screen and (min-width: 768px) {
      body {
  	font-size: 16px;
      }
  }
  @media print {
      * {
  	background: transparent !important;
  	color: black !important;
  	filter: none !important;
  	-ms-filter: none !important;
      }

      body {
  	font-size: 12pt;
  	max-width: 100%;
      }

      a, a:visited {
  	text-decoration: underline;
      }

      hr {
  	height: 1px;
  	border: 0;
  	border-bottom: 1px solid black;
      }

      a[href]:after {
  	content: " (" attr(href) ")";
      }

      abbr[title]:after {
  	content: " (" attr(title) ")";
      }

      .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after {
  	content: "";
      }

      pre, blockquote {
  	border: 1px solid #999;
  	padding-right: 1em;
  	page-break-inside: avoid;
      }

      tr, img {
  	page-break-inside: avoid;
      }

      img {
  	max-width: 40% !important;
      max-height: 300px !important;
      }

      @page :left {
  	margin: 15mm 20mm 15mm 10mm;
      }

      @page :right {
  	margin: 15mm 10mm 15mm 20mm;
      }

      p, h2, h3 {
  	orphans: 3;
  	widows: 3;
      }

      h2, h3 {
  	page-break-after: avoid;
      }
  }


  ldata {
  	font-size: 0.7em;
  	margin-bottom: 0em;
  	color:#808080;
  	font-style:italic;
  }

  danger {
  	color:#FF0000;
  	font-weight:bold;
  }

  correct {
  	color:#39C900;
  	font-weight:bold;
  }

  clg{
      color:#39C900;
  	font-weight:bold;
  }

  clr{
  	color:#FF0000;
  	font-weight:bold;
  }

  clb{
  	color:#0000CC;
  	font-weight:bold;
  }

  clp{
  	color:#6600FF;
  	font-weight:bold;
  }

  clk{
  	color:#708cef;
  	font-weight:bold;
  }

  clo{
  	color:#CC6600;
  	font-weight:bold;
  }

  sc{
          font-variant: small-caps;
  }

  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<p><img src="humorimg/xkcd_automation.png"></p>
<hr />
<h1 id="praat-scripting-for-fun-and-minimal-profit">Praat Scripting for
fun and (minimal) profit</h1>
<p>Will Styler</p>
<hr />
<h3 id="so-what-parts-of-praat-do-we-need-to-worry-about">So, what parts
of Praat do we need to worry about?</h3>
<hr />
<h3 id="the-objects-window">The “Objects” window</h3>
<p><img class="big" src="phonmedia/praat_objects_window.png"></p>
<hr />
<h3 id="the-editor-window">The “Editor” window</h3>
<p><img class="big" src="phonmedia/praat_editor_window.png"></p>
<hr />
<h3 id="the-picture-window">The “Picture” window</h3>
<p><img class="big" src="phonmedia/praat_picture_window.png"></p>
<hr />
<h3 id="the-info-window">The “Info” window</h3>
<p><img class="big" src="phonmedia/praat_info_window.png"></p>
<hr />
<h3 id="the-help-window">The “Help” window</h3>
<p><img class="big" src="phonmedia/praat_manual.png"></p>
<hr />
<h3 id="the-script-editor-window">The Script Editor Window</h3>
<p>(Go to “Praat” -&gt; “New Praat Script”)</p>
<p><img class="big" src="phonmedia/praat_script_window.png"></p>
<hr />
<h3 id="why-script-in-praat">Why script in Praat?</h3>
<ul>
<li><p>Let the computer do the boring parts of your
measurements</p></li>
<li><p>Be more consistent over large amounts of data</p></li>
<li><p>Get your work done faster with a computer co-pilot</p></li>
<li><p>Doing the same thing more than a few times is silly</p></li>
<li><p>You can do anything that you can do through menus in
Praat</p></li>
<li><p><strong>You are the bottleneck in your data measurement
speed</strong></p></li>
</ul>
<hr />
<h3 id="for-example-my-dissertation">For Example: My Dissertation</h3>
<ul>
<li><p>I measured 29 features of nasality at two points per vowel per
word</p></li>
<li><p>… for a corpus of 3,823 tokens of English words</p></li>
<li><p>Manual measurement of the main feature (1 of the 29) takes around
1 minute</p></li>
<li><p>Getting just that one feature for each word in the corpus would
require <em>1900 continuous hours of manual measurement</em></p></li>
<li><p>Fully automatic measurement allows measuring all 29 features in
about 12 minutes</p></li>
<li><p><strong><em>… across the entire 3,823 word
corpus.</em></strong></p></li>
</ul>
<hr />
<h3 id="so-rather-than-79-solid-days-of-manual-measurement">So, rather
than 79 solid days of manual measurement…</h3>
<hr />
<p><img class="big" src="img/coffee.jpg"></p>
<hr />
<p><img class="big" src="humorimg/areyouawizard.png"></p>
<hr />
<h2 id="no-i-just-write-praat-scripts">No, I just write Praat
scripts!</h2>
<p><img class="big" src="humorimg/dontgetcocky.jpg">
<!-- .element: class="fragment" --></p>
<hr />
<h3 id="what-you-cannot-do-with-praat-scripting">What you
<em>cannot</em> do with Praat scripting</h3>
<ul>
<li><p>Label your data/speech recognition</p>
<ul>
<li>You can label known data with <a
href="http://linguisticmystic.com/2015/03/10/a-phoneticians-software-toolkit/">“Forced
Align”</a></li>
</ul></li>
<li><p>Work with programs that aren’t Praat (*)</p></li>
<li><p>Run statistics on your data (but <a
href="http://www.aaronalbin.com/praatr/">PraatR</a> exists!)</p>
<ul>
<li>… and you can dump your data into R scripting!</li>
</ul></li>
<li><p>Anything that you can’t, eventually, do through the Praat
UI</p></li>
<li><p>Generate measurements as consistent as hand measurements</p></li>
<li><p>Sanity-check your data and measurements (*)</p></li>
<li><p><em>… but you can definitely do some things more
easily!</em></p></li>
</ul>
<hr />
<h3
id="imagine-you-dropped-out-of-grad-school-and-bought-a-spaceship">Imagine
you dropped out of grad school and bought a spaceship…</h3>
<p><img class="big" src="img/stardestroyer.png"></p>
<hr />
<h3 id="youre-a-factory-superintendent-on-the-planet-analogion">You’re a
factory superintendent on the planet Analogion</h3>
<p>Your alien factory workers…</p>
<ul>
<li><p>Cannot hear you</p></li>
<li><p>Cannot talk with you except with canned phrases</p></li>
<li><p>Cannot interact with you</p></li>
<li><p>Don’t know when something goes wrong</p></li>
<li><p>…aren’t terribly capable of independent thought</p></li>
</ul>
<hr />
<p>In fact…</p>
<ul>
<li><strong>The only thing they understand are simple written
instructions which they complete exactly</strong></li>
</ul>
<hr />
<h2 id="praat-is-basically-an-alien">Praat is basically an alien</h2>
<hr />
<h3 id="your-final-product">Your final product</h3>
<p><img class="big" src="phonmedia/pscript_finalcar.png"></p>
<hr />
<h3 id="your-parts">Your parts</h3>
<p><img class="big" src="phonmedia/pscript_carparts.png"></p>
<hr />
<h3 id="put-the-wheels-and-racing-stripe-on-the-body">“Put the wheels
and racing stripe on the body!”</h3>
<p><img class="big" src="phonmedia/pscript_badassembly.png"></p>
<hr />
<p>When scripting, you will need to be a bit more specific than you
normally would.</p>
<ul>
<li><strong>Computers are stupid: They do exactly what you tell them
to.</strong></li>
</ul>
<hr />
<h3 id="what-is-a-praat-script">What is a Praat script?</h3>
<ul>
<li>A file with a series of commands for Praat and comments for
humans</li>
</ul>
<hr />
<pre><code># This is a comment, Praat ignores lines that start with #
select Sound untitled
# Plays the sound
Play
# Gets the duration
Get total duration
# Gets the amplitude
Get intensity (dB)
# Renames it
Rename... My_awesome_sound
# Prints the message into the Praat information window
print “Script Finished”</code></pre>
<hr />
<p>Praat has changed some of the scripting commands to become “more
modern”</p>
<ul>
<li><strong>The ones in this slideshow still work, though!</strong></li>
</ul>
<hr />
<h3 id="your-very-first-praat-script">Your very first Praat script</h3>
<ul>
<li><p>Let’s automate something you do all the time, in the same way
each time</p></li>
<li><p><em>Like making a broadband vs. narrowband
spectrogram</em></p></li>
</ul>
<hr />
<h3 id="open-praat-then-go-to-new-praat-script">Open Praat, then go to
“New Praat Script”</h3>
<p><img class="big" src="phonmedia/praat_menu.png"></p>
<hr />
<h3 id="capturing-the-commands-using-history">Capturing the commands
using “History”</h3>
<p>Now, open a sound, and narrow the spectrogram
<!-- .element: class="fragment" --></p>
<p>Then, go to the script window and “Paste History”
<!-- .element: class="fragment" --></p>
<p><img class="big" src="phonmedia/praat_script_menu.png">
<!-- .element: class="fragment" --></p>
<hr />
<h2 id="history-saves-everything-you-do-in-praat">History saves
everything you do in Praat</h2>
<ul>
<li>This is the best (and sometimes only) way to find different Praat
commands.</li>
</ul>
<hr />
<h3 id="almost-done">Almost done!</h3>
<ul>
<li><p>You now have a few lines, one of which looks like …</p>
<p>Spectrogram settings… 0 5000 0.05 50</p></li>
<li><p>That’s your first script. Make that line the only thing in the
script window</p></li>
<li><p>Now save the script someplace handy, narrowband.praat</p></li>
<li><p>Now, you can add it to any menu as described in Section 11.2.2 of
<a href="http://savethevowels.org/praat">Using Praat for Linguistic
Research</a></p></li>
<li><p><strong>You just wrote your first Praat script!</strong></p></li>
</ul>
<hr />
<p><img class="big" src="humorimg/celebration.gif"></p>
<hr />
<h2 id="praat-scripting-commands-resemble-the-commands-in-the-gui">Praat
scripting commands resemble the commands in the GUI</h2>
<hr />
<h3 id="spectrogram-settings-0-5000-0.005-50">Spectrogram settings… 0
5000 0.005 50</h3>
<p><img src="phonmedia/praat_spectrogram_settings_compared.png"></p>
<hr />
<h3 id="you-can-make-the-spectrogram-broad-band-again">You can make the
spectrogram broad-band again!</h3>
<ul>
<li>Spectrogram settings… 0 5000 <strong>0.025</strong> 50</li>
</ul>
<hr />
<h2 id="to-go-fancier-we-need-more-scripting-knowledge">To go fancier,
we need more scripting knowledge!</h2>
<hr />
<h3 id="variables-are-like-pronouns-for-data.">Variables are like
pronouns for data.</h3>
<p>“Remember whats-his-name, that guy who brought the great pecan pie
last year?” <!-- .element: class="fragment" --></p>
<p>“Yeah…?”<!-- .element: class="fragment" --></p>
<p>“Invite whats-his-name to Thanksgiving this
year!”<!-- .element: class="fragment" --></p>
<blockquote>
<p>whatshisname$ = Find guy who brought pecan pie
<!-- .element: class="fragment" --></p>
</blockquote>
<blockquote>
<p>party-invite whatshisname$ <!-- .element: class="fragment" --></p>
</blockquote>
<hr />
<h3 id="assigning-variables">Assigning Variables</h3>
<pre><code>variable = 1000

variable = Get number of intervals... &#39;1&#39;

start = Get starting point... 1 2

end = Get end point... 1 2

midpoint = start + ((end - start) / 2)</code></pre>
<hr />
<h3 id="get-vocal-tract-length-from-f3-at-cursor">Get vocal tract length
from F3 at cursor</h3>
<pre><code>f3h = Get third formant
length = (1715/(4 * f3h))
lcm = length * 100
print Your vocal tract length is &#39;lcm:1&#39; cm</code></pre>
<hr />
<h3 id="getting-a-bit-fancier">Getting a bit fancier</h3>
<p>Sometimes, you want to automate more than one command</p>
<p><strong>You can put multiple lines into a file, and Praat runs
through them at a single command!</strong></p>
<pre><code># Get the selected sound
soundname$ = selected$ (&quot;Sound&quot;)
select Sound &#39;soundname$&#39;
# Rename it!
Rename... &#39;soundname$&#39;_resampled
# Resample it, then write to file!
Resample... 10000 50
Write to WAV file... ‘soundname$‘_10000.wav</code></pre>
<hr />
<h3 id="the-buttonskynet-continuum">The Button/Skynet continuum</h3>
<ul>
<li><p>You can write scripts of various degrees of complexity</p></li>
<li><p>Some scripts run a single command quickly, and act as a new
button</p>
<ul>
<li>The user is completely in control, but it’s relatively slow</li>
</ul></li>
<li><p>Some scripts run a large process, but keep the user involved</p>
<ul>
<li>The user yields some control to gain speed</li>
</ul></li>
<li><p>Some scripts go through a large process on their own, without
your help</p>
<ul>
<li>Fastest, but you don’t control any of the process while it’s
running</li>
</ul></li>
</ul>
<hr />
<h2 id="youll-always-trade-speed-for-control">You’ll always trade speed
for control</h2>
<ul>
<li>Be realistic about your needs, both in time and precision</li>
</ul>
<hr />
<h1 id="working-across-files">Working across files</h1>
<hr />
<h3
id="to-work-on-many-files-you-need-more-than-just-the-files-you-have-open">To
work on many files, you need more than just the file(s) you have
open</h3>
<hr />
<h3 id="giving-praat-files-and-information">Giving Praat files and
information</h3>
<ul>
<li><p>Praat doesn’t know what a vowel is, and can’t find them
natively</p></li>
<li><p>Sound files are annotated for Praat by making “TextGrids”.</p>
<ul>
<li>These are separate companion files that list segments or points,
along with their labels</li>
</ul></li>
<li><p>Textgrids have “Tiers”, as many as you want, which can be used to
annotate different levels of detail</p>
<ul>
<li>You might have a “Word” tier and a “Vowel” tier.</li>
</ul></li>
<li><p>Interval tiers mark spans (like vowels), point tiers mark moments
(like releases)</p></li>
</ul>
<hr />
<p><img class="big" src="phonmedia/praat_textgrid_window.png"></p>
<hr />
<h3
id="textgrids-are-your-way-of-giving-praat-the-information-it-cant-figure-out-on-its-own">Textgrids
are your way of giving Praat the information it can’t figure out on its
own</h3>
<ul>
<li><p>Once you’ve got files and textgrids, you can then pull in a whole
batch of files</p></li>
<li><p>Praat can do something to every one of those files.</p></li>
<li><p>This happens through the magic of…</p></li>
</ul>
<hr />
<h2 id="for-loops">‘for loops’</h2>
<hr />
<h2 id="section"><img class="big" src="phonmedia/pscript_for1.png"></h2>
<h2
id="section-1"><img class="big" src="phonmedia/pscript_for2.png"></h2>
<h2
id="section-2"><img class="big" src="phonmedia/pscript_for3.png"></h2>
<h2
id="section-3"><img class="big" src="phonmedia/pscript_for4.png"></h2>
<h3 id="for-loops-1">‘for’ loops</h3>
<p>For loops iterate through large amounts of data, doing the same thing
each time.</p>
<p>They always have the format for [var] from 1 to [other var], followed
by an indented block, ended with an endfor</p>
<pre><code>select TextGrid Sound1
number_intervals = Get number of intervals... 2
for k from 1 to number_intervals
    int_start = Get starting point... 1 &#39;k&#39;
    int_end = Get end point... 1 &#39;k&#39;
    int_duration = (int_end - int_start)
    print int_duration
endfor
# This code gets the duration of every interval and prints it</code></pre>
<hr />
<h2 id="taking-control-with-if-statements">Taking control with ‘if’
statements</h2>
<table style="width:6%;">
<colgroup>
<col style="width: 5%" />
</colgroup>
<thead>
<tr class="header">
<th><img class="big" src="phonmedia/pscript_if1.png"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><img class="big" src="phonmedia/pscript_if2.png"></td>
</tr>
</tbody>
</table>
<h2
id="section-4"><img class="big" src="phonmedia/pscript_if3.png"></h2>
<h2
id="section-5"><img class="big" src="phonmedia/pscript_if4.png"></h2>
<h3 id="if-statements">‘if’ statements</h3>
<p>Used when a given action happens <em>only if another condition is
met</em></p>
<p>Usually take the form if [var] = [value], indented block, endif</p>
<table style="width:6%;">
<colgroup>
<col style="width: 5%" />
</colgroup>
<tbody>
<tr class="odd">
<td>### If you want an example…</td>
</tr>
<tr class="even">
<td>select TextGrid Sound1 number_intervals = Get number of intervals… 2
for k from 1 to number_intervals int_label$ = Get label of interval… 1
‘k’ if int_label$ = “v” int_start = Get starting point… 1 ‘k’ int_end =
Get end point… 1 ‘k’ int_duration = (int_end - int_start) print
int_duration endif endfor</td>
</tr>
</tbody>
</table>
<h3 id="other-residents-of-script-land">Other Residents of
Script-land</h3>
<ul>
<li><p># at the start of the line means ‘comment’, Praat will ignore the
line</p></li>
<li><p>Adding a :number to a variable name ( variable:2 ) will round to
that number of decimal places</p></li>
<li><p>The print command will print whatever follows it into the info
window</p>
<ul>
<li><em>print duration</em> will print the contents of the variable
duration</li>
<li><em>print “duration”</em> will print the word “duration”</li>
<li>This is useful for debugging (print variables which might be
bad!)</li>
</ul></li>
</ul>
<hr />
<h3 id="praat-is-weird">Praat is weird</h3>
<ul>
<li><p>Don’t put decimals or unicode in Filenames</p></li>
<li><p>The symbol for “not equal to” is &lt;&gt; in Praat, rather than
!= or something sane</p></li>
<li><p>You’ll have to describe folder/file locations differently on a
Mac vs. Windows</p>
<ul>
<li>directory$ = “c:data" (Windows)</li>
<li>directory$ = “/Users/will/Documents/test data/” (Mac)</li>
</ul></li>
<li><p>Praat won’t always agree with itself from window to
window</p></li>
<li><p>A single quotation mark can be your worst enemy</p></li>
</ul>
<hr />
<h3 id="debugging">Debugging</h3>
<ul>
<li><p>Your script will crash more times than it runs</p></li>
<li><p>Look at the error message, look at the line number it mentions,
start there</p></li>
<li><p>Sometimes, the error message will give you good
information</p></li>
<li><p>print the contents of variables, to make sure it’s getting the
right values</p></li>
<li><p>Use the “fail” command to crash the script at a given point (to
make sure the script is getting there at all).</p>
<ul>
<li>Just keep moving the command until you know just where the error
occurs.</li>
</ul></li>
</ul>
<hr />
<h3 id="praats-scripting-help">Praat’s Scripting Help</h3>
<p>It’s actually really good <!-- .element: class="fragment" --></p>
<p><img src="phonmedia/praat_script_tutorial.png">
<!-- .element: class="fragment" --></p>
<hr />
<h2 id="in-defense-of-cannibalism">In Defense of Cannibalism</h2>
<p><img class="big" src="humorimg/alferdpacker.png"></p>
<hr />
<h3 id="steal-code.">Steal code.</h3>
<ul>
<li><p>If you find a script that does 90% of what you want, just add the
10% yourself</p></li>
<li><p>Give the author of the code credit with a comment</p></li>
<li><p>Don’t trust anybody else’s math</p>
<ul>
<li>Especially not mine</li>
</ul></li>
<li><p>Some code is just bad</p></li>
</ul>
<hr />
<h2 id="the-majority-of-my-scripts-are-open-source">The majority of my
scripts are open source</h2>
<p>https://github.com/stylerw</p>
<h3 id="please-steal-them.">Please steal them.
<!-- .element: class="fragment" --></h3>
<hr />
<h1 id="the-automation-urge">The Automation Urge</h1>
<hr />
<p><img src="humorimg/xkcd_automation.png"></p>
<p>Source: http://www.xkcd.com/974/</p>
<hr />
<h3
id="automating-comes-from-the-roots-auto--meaning-self-and-mating-meaning-screwing">‘Automating’
comes from the roots ‘auto-‘ meaning “self”, and ‘mating’ meaning
“screwing”</h3>
<p>Source: http://www.xkcd.com/1319/</p>
<hr />
<h3 id="when-scripting-measurements-can-be">When scripting, measurements
can be…</h3>
<p>Accurate <!-- .element: class="fragment" --></p>
<p>Automated <!-- .element: class="fragment" --></p>
<p>Abundant <!-- .element: class="fragment" --></p>
<h2 id="pick-any-2.">Pick any 2.
<!-- .element: class="fragment" --></h2>
<hr />
<h3 id="whys-that">Why’s that?</h3>
<ul>
<li><p>Humans only make sane measurements, computers don’t care</p></li>
<li><p>You know that his F0 is not 3000 Hz. Praat doesn’t.</p></li>
<li><p>You can find H1 and H2 easily. It can’t</p></li>
<li><p>You can figure out easily if the formant track is right. It
definitely can’t.</p></li>
<li><p>Praat is a black box sometimes</p></li>
<li><p><strong>You need to double-check everything, or your data could
be subtly wrong</strong></p></li>
</ul>
<hr />
<h3 id="data-checks">Data Checks</h3>
<ul>
<li><p>Praat doesn’t know what sane measurements are</p></li>
<li><p>Take the data more times than you need, and throw out known bad
data</p></li>
<li><p>Ask it to present you with the data to hand confirm</p></li>
<li><p>Figure out how Praat fails, and have it detect the failure mode,
try again</p></li>
<li><p>Sometimes, you just need to back up 10 ms or something</p></li>
<li><p>If you’re feeling dirty, use averaging</p></li>
<li><p>Post-Hoc checking. Lots of it. Over, and over, and over.</p></li>
</ul>
<hr />
<h3 id="think-before-you-automate">Think before you automate</h3>
<hr />
<p><img class="big" src="humorimg/xkcd_routine_task_1205.png"></p>
<p><a href="https://xkcd.com/1205/">Source</a></p>
<hr />
<h3 id="think-before-you-automate-1">Think before you automate</h3>
<ul>
<li><p>Automating a task will cost you time. Will you gain enough
back?</p></li>
<li><p>Automating a task will add noise. Can you handle that?</p></li>
<li><p>Automating a task will remove control. Do you need to have
control?</p></li>
</ul>
<hr />
<h3 id="but-dont-be-too-reluctant">… but don’t be too reluctant</h3>
<ul>
<li><p>Time spent coding something is regained when you reuse
it</p></li>
<li><p>You can build on your past approaches</p></li>
<li><p>Re-running the data basically comes free.</p></li>
<li><p>Most importantly, though…</p></li>
<li><p><strong>You feel like a wizard.</strong></p></li>
</ul>
<hr />
<p><img class="big" src="humorimg/wizardcat.jpg"></p>
<hr />
<h3 id="you-will-hate-your-life-if-you-praat-script">You will hate your
life if you Praat script</h3>
<ul>
<li><p>Even after 10 years, I still have to debug everything I write,
and regularly screw up.</p></li>
<li><p>You will get 50 crashes, caused by 50 little mistakes</p></li>
<li><p>You will question why you’re bothering with this, and where your
life went wrong</p></li>
<li><p>You will feel like you are alone in your pain</p></li>
</ul>
<hr />
<h3 id="but-suddenly-it-will-work">… but suddenly, it will work</h3>
<ul>
<li><p>You’ll realize that your script hasn’t crashed</p></li>
<li><p>… and that data is pouring into the designated file</p></li>
<li><p>… and that the data looks OK</p></li>
<li><p>… and then, eventually, you have the greatest realization
ever</p></li>
</ul>
<hr />
<p><img src="humorimg/scripting_mythbusters.png"></p>
<hr />
<h2 id="and-you-will-realize-that-the-world-is-a-wonderful-place">And
you will realize that the world is a wonderful place</h2>
<ul>
<li><strong>… and you owe it all to Praat scripting</strong></li>
</ul>
<hr />
<h3 id="get-more-scripting-information">Get more scripting
information</h3>
<p>Download useful examples (as well as a fun guide on using Praat)
from:</p>
<p>http://savethevowels.org/praat/</p>
<hr />
<h3 id="and-please-feel-free-to-email-me-when-youre-having-trouble">…
and please feel free to email me <strong><em>when</em></strong> you’re
having trouble!</h3>
<hr />
<h1 id="lets-look-at-an-example">Let’s look at an example!</h1>
<h2 id="example-script-is-here"><a
href="https://raw.githubusercontent.com/stylerw/styler_praat_scripts/master/demo_formant_script.praat">Example
script is here</a></h2>
<pre><code># This part presents a form to the user
form Measure Formants and Duration
    comment Sound file extension:
        optionmenu file_type: 2
        option .aiff
        option .wav
endform

directory$ = chooseDirectory$ (&quot;Choose the directory containing sound files and textgrids&quot;)
# This will need to be changed to \ below for PC users
directory$ = &quot;&#39;directory$&#39;&quot; + &quot;/&quot; 
resultfile$ = &quot;&#39;directory$&#39;&quot;+&quot;formantlog.txt&quot;

header_row$ = &quot;filename&quot; + tab$ + &quot;vowel&quot; + tab$ + &quot;Duration&quot; + tab$ + &quot;F1&quot; +
tab$ + &quot;F2&quot; + tab$ + &quot;F3&quot; + newline$

fileappend &quot;&#39;resultfile$&#39;&quot; &#39;header_row$&#39;</code></pre>
<hr />
<pre><code># List of all the sound files in the specified directory:
Create Strings as file list... list &#39;directory$&#39;*&#39;file_type$&#39;
number_files = Get number of strings

# This opens all the files one by one
for j from 1 to number_files
    select Strings list
    filename$ = Get string... &#39;j&#39;
    Read from file... &#39;directory$&#39;&#39;filename$&#39;
    soundname$ = selected$ (&quot;Sound&quot;)
    filedur = Get total duration
    # identify associated TextGrid
    gridfile$ = &quot;&#39;directory$&#39;&#39;soundname$&#39;.TextGrid&quot;
    if fileReadable (gridfile$)
        Read from file... &#39;gridfile$&#39;
        select TextGrid &#39;soundname$&#39;
        number_intervals = Get number of intervals... 1</code></pre>
<hr />
<pre><code># Go through each item
for k from 1 to number_intervals
    select TextGrid &#39;soundname$&#39;
    int_label$ = Get label of interval... 1 &#39;k&#39;
    #checks if interval has a label
    if int_label$ &lt;&gt; &quot;&quot;
        # Calc start, end, and duration of interval
        intstart = Get starting point... 1 &#39;k&#39;
        intend = Get end point... 1 &#39;k&#39;
        intdur = intend - intstart
        intmid = intstart + (intdur / 2)</code></pre>
<hr />
<pre><code>    # Get all the formants!
    select Sound &#39;soundname$&#39;
    To Formant (burg)... 0 5 5500 0.025 50
    intf1 = Get value at time... 1 &#39;intmid&#39; Hertz Linear
    intf2 = Get value at time... 2 &#39;intmid&#39; Hertz Linear
    intf3 = Get value at time... 3 &#39;intmid&#39; Hertz Linear

    # Dump results into a file.
    result_row$ = &quot;&#39;filename$&#39;&quot; + tab$ + &quot;&#39;int_label$&#39;&quot; + tab$ + &quot;&#39;intdur&#39;&quot; + tab$ +
    &quot;&#39;intf1&#39;&quot; + tab$ + &quot;&#39;intf2&#39;&quot; + tab$ + &quot;&#39;intf3&#39;&quot; + newline$
    fileappend &quot;&#39;resultfile$&#39;&quot; &#39;result_row$&#39;
endif
endfor
endif
endfor
# That&#39;s all!</code></pre>
<hr />
<h1 id="a-few-other-slides-just-in-case">A few other slides, just in
case!</h1>
<hr />
<h3 id="forms">Forms</h3>
<p><img class="big" src="phonmedia/praat_form.png"></p>
<hr />
<h3 id="forms-1">Forms</h3>
<ul>
<li><p>Forms show up at the very start of your script</p></li>
<li><p>They allow you to enter information at the start of every script
run</p></li>
<li><p>Common variable changes don’t need to be made in the script
per-se</p></li>
<li><p>They let you make decisions about how the script is run</p></li>
<li><p>More info in the tutorial</p></li>
</ul>
<hr />
<h3 id="pause-forms">Pause Forms</h3>
<p><img class="big" src="phonmedia/praat_pause_form.png"></p>
<hr />
<h3 id="pause-forms-1">Pause Forms</h3>
<ul>
<li><p>These allow the script to pause so the user can fill in or
confirm data</p></li>
<li><p>This also gives the user a chance to change the course of the
script while it’s already running</p></li>
<li><p>The script will stop until the user restarts it</p></li>
<li><p>Also listed in the tutorial (“Controlling the User”)</p></li>
</ul>
<hr />
<h3 id="procedures">Procedures</h3>
<p>If you’re doing the same thing over and over in a script, make a
procedure of it, and just call that procedure, then call it later in the
script!</p>
<pre><code>procedure f0check
    if h1 &lt; 90
        error = 1
    endif
endproc

h1 = [some variable]
call f0check
if error = 1
    pause
endif</code></pre>
<hr />
<h3 id="editor-scripting">Editor scripting</h3>
<p>If you need access to things done in the editor window, you’ll need
to do editor scripting</p>
<p>This allows you to do things like cutting and pasting chunks of
sound, and using the Formant and Pitch trackers within the editor
window</p>
<pre><code>select Sound &#39;soundname$&#39;
Edit
editor Sound &#39;soundname$&#39;
    Select... startvowel endvowel
    Cut
endeditor</code></pre>
<hr />
</body>
</html>
